# RocketChat Helm values for OpenShift with external MongoDB
#
# ⚠️ UPDATE REQUIRED:
#   1. Replace <your-apps-domain> with your OpenShift cluster's apps domain
#   2. Replace <your-password> with the password from mongodb-standalone.yaml
#   3. Replace <your-namespace> with your OpenShift project/namespace
#
# Example for Developer Sandbox:
#   host: rocketchat.apps.rm3.7wse.p1.openshiftapps.com
#   externalMongodbUrl: "mongodb://admin:change-me@mongodb.ryan-nix-dev.svc.cluster.local:27017/rocketchat?authSource=admin"

# Domain configuration
host: rocketchat.apps.<your-apps-domain>.com

# Ingress configuration (creates OpenShift Route)
ingress:
  enabled: true
  annotations:
    route.openshift.io/termination: edge

# Disable built-in Bitnami MongoDB - we deploy MongoDB separately
# This is required because:
#   1. Bitnami discontinued MongoDB images (no MongoDB 7.0+ available)
#   2. RocketChat 8.x requires MongoDB 7.0+
#   3. Bitnami chart has hardcoded security contexts incompatible with OpenShift
mongodb:
  enabled: false

# External MongoDB connection strings
# Format: mongodb://user:password@host:port/database?options
externalMongodbUrl: "mongodb://admin:<your-password>@mongodb.<your-namespace>.svc.cluster.local:27017/rocketchat?authSource=admin"
externalMongodbOplogUrl: "mongodb://admin:<your-password>@mongodb.<your-namespace>.svc.cluster.local:27017/local?authSource=admin"

# Let OpenShift handle security contexts
# These empty objects prevent the chart from setting any security context,
# allowing OpenShift to assign appropriate UIDs from the project's range
podSecurityContext: {}
containerSecurityContext: {}
securityContext: {}

serviceAccount:
  create: true

# Resource limits appropriate for Developer Sandbox
# Adjust these for production deployments
resources:
  requests:
    memory: "512Mi"
    cpu: "250m"
  limits:
    memory: "2Gi"
    cpu: "1000m"
