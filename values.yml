# RocketChat Helm values for OpenShift with external MongoDB
#
# ℹ️  NOTE: This file is for REFERENCE ONLY.
#     The deploy.sh script handles all configuration automatically via --set flags.
#     You don't need to edit this file unless you want to do a manual deployment.
#
# For manual deployment without deploy.sh:
#   1. Replace <your-apps-domain> with your OpenShift cluster's apps domain
#   2. Replace <your-password> with a secure password
#   3. Replace <your-namespace> with your OpenShift project/namespace
#   4. Run: helm install rocketchat ./rocketchat -f values.yml
#
# The deploy.sh script does all of this automatically:
#   ./deploy.sh --host rocketchat.apps.example.com

# Domain configuration
host: rocketchat.apps.<your-apps-domain>.com

# Ingress configuration (creates OpenShift Route)
ingress:
  enabled: true
  annotations:
    route.openshift.io/termination: edge

# Disable built-in Bitnami MongoDB - we deploy MongoDB separately
# This is required because:
#   1. Bitnami discontinued MongoDB images (no MongoDB 8.2+ available)
#   2. RocketChat 8.x requires MongoDB 8.2+
#   3. Bitnami chart has hardcoded security contexts incompatible with OpenShift
mongodb:
  enabled: false

# External MongoDB connection strings
# The deploy.sh script generates these automatically with the correct password and namespace.
# Format: mongodb://user:password@host:port/database?options
externalMongodbUrl: "mongodb://admin:<your-password>@mongodb.<your-namespace>.svc.cluster.local:27017/rocketchat?authSource=admin"
externalMongodbOplogUrl: "mongodb://admin:<your-password>@mongodb.<your-namespace>.svc.cluster.local:27017/local?authSource=admin"

# Let OpenShift handle security contexts
# These empty objects prevent the chart from setting any security context,
# allowing OpenShift to assign appropriate UIDs from the project's range
podSecurityContext: {}
containerSecurityContext: {}
securityContext: {}

serviceAccount:
  create: true

# Resource limits appropriate for Developer Sandbox
# Adjust these for production deployments
resources:
  requests:
    memory: "512Mi"
    cpu: "250m"
  limits:
    memory: "2Gi"
    cpu: "1000m"
